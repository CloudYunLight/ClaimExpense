# Nodejs项目样例
```
backend/
├── src/                          # 源代码目录
│   ├── app.js                    # Express应用实例
│   ├── server.js                 # 服务启动入口（从根目录移动过来）
│   ├── middleware/               # 中间件
│   │   ├── auth.middleware.js    # 认证中间件
│   │   ├── rateLimiter.middleware.js
│   │   ├── errorHandler.middleware.js
│   │   └── validation.middleware.js # 新增：请求验证
│   ├── models/                   # 数据模型
│   │   ├── User.js
│   │   ├── Bill.js
│   │   ├── ReimbursementList.js
│   │   └── index.js              # 模型导出
│   ├── controllers/              # 控制器（新增）
│   │   ├── auth.controller.js    # 从routes/auth.js抽取逻辑
│   │   ├── user.controller.js    # 从routes/user.js抽取逻辑
│   │   ├── bill.controller.js
│   │   ├── list.controller.js
│   │   └── dashboard.controller.js
│   ├── services/                 # 业务逻辑层（新增）
│   │   ├── auth.service.js
│   │   ├── user.service.js
│   │   ├── bill.service.js
│   │   ├── list.service.js
│   │   └── dashboard.service.js
│   ├── routes/                   # 路由定义
│   │   ├── auth.routes.js 
│   │   ├── user.routes.js
│   │   ├── bill.routes.js
│   │   ├── list.routes.js
│   │   ├── dashboard.routes.js
│   │   └── index.js              # 路由聚合
│   └── db/                       # 数据库连接（可选）
│       └── connection.js         # 数据库连接管理
├── logs/                         # 日志目录
│   ├── access.log                # 访问日志
│   ├── error.log                 # 错误日志
│   └── combined.log              # 访问和错误日志
├── tests/                        # 测试目录
│   └── TestData.md               # 测试数据
├── package.json                  # 项目依赖、启动配置
├── package-lock.json
└── README.md
```

# 开发日志

##  v0.3 处理登录和验证模块：`auth.js`&&`user.js`，修正中间件命名&数据库链接情况
 重构中间件文件结构并优化用户模型
- 将中间件文件统一添加 .mid 扩展名以便识别
- 优化 User 模型中的数据库查询逻辑
- 改进密码重置功能，使用 crypto 模块生成安全随机密码
- 修复数据库查询结果处理，避免空结果导致的错误


## 模块化数据库操作`database`
- 更改`config`文件的读取方式
- 将所有数据库操作，使用`database`进行；使用`excute`进行数据库操作;
- - 暂时停掉所有的事务性操作


## 处理中间件`errorHandler`&&`rateLimiter`
- 处理 `errorHandler` 其中无法根据err.name 判断错误类型，无对应的抛出error内容[!]
- 处理 `rateLimiter` ，由config文件限制频次

## v0.2 处理logger.js && config.init
- 处理 `logger.js` 严格按照日志级别过滤日志
- 调整日志格式化逻辑，优化访问日志输出格式
- 移除多余的详细日志开关配置，统一使用日志级别控制
- 更新server.js启动日志显示当前使用的日志级别



## 处理 app.js && server.js 文件
- 创建app.js，将server.js中的代码移动到app.js中
- server.js 仅作为监听用
- app.js 用于挂载中间件，挂载顺序即处理顺序
问题：
- 下一步解决 `logger.js`的代码

## 更改后端代码布局
- 整理后端代码结构，将代码放在src文件下
- 新建开发日志文件，以及测试数据文件（ignored）
问题:
- 下一阶段整理server.js/logger.js

## V0.1 后端基础版本
- 初步灵码生成后端框架；能够无报错运行

问题：
- 代码架构混乱，需要重新整理文件
- 代码逻辑未验证，需要梳理逻辑
- git管理失范，未形成分支处理（master/dev）
